<div class="dashboard-wrapper">
  <!-- Toggle Arrow -->
  <button class="toggle-button" (click)="toggleSidebar()">
    <span>{{ sidebarOpen ? 'â—€' : 'â–¶' }}</span>
  </button>

  <!-- Sidebar -->
  <div class="sidebar" [class.closed]="!sidebarOpen">
    <h3>ğŸ“¦ Products</h3>
    <ul class="product-list">
      <li *ngFor="let product of products">
        <!-- Product title with toggle -->
        <div class="product-title" (click)="toggleProduct(product.id)">
          {{ product.name }}
          <span class="arrow">{{ expandedProductId === product.id ? 'â–¼' : 'â–¶' }}</span>
        </div>

        <!-- Tree menu if expanded -->
        <ul *ngIf="expandedProductId === product.id" class="submenu">
          <li>
            <a [routerLink]="['/tester/add-testcases']" [queryParams]="{ productId: product.id, productName: product.name }">â• Add Test Cases</a>
          </li>
          <li>
            <a [routerLink]="['/tester/import-excel']" [queryParams]="{ productId: product.id, productName: product.name }">ğŸ“¥ Import Excel</a>
          </li>
          <li>
            <a [routerLink]="['/tester/modules']" [queryParams]="{ productId: product.id, productName: product.name }">ğŸ§ª Modules</a>
          </li>

          <!-- ğŸ“Š Results with dropdown -->
         <li>
  <div class="submenu-toggle" (click)="toggleResults(product.id)">
    ğŸ“Š Results
    <span class="arrow">
      {{ expandedResultsProductId === product.id ? 'â–¼' : 'â–¶' }}
    </span>
  </div>

  <ul *ngIf="expandedResultsProductId === product.id" class="submenu">
    <li>
      <a
        [routerLink]="['/tester/results']"
        [queryParams]="{ productId: product.id, productName: product.name }"
      >
        ğŸ§‘â€ğŸ’» Manual Results
      </a>
    </li>
    <li>
      <a href="javascript:void(0)" (click)="onAutomationClick()">
        ğŸ¤– Automation Results
      </a>
    </li>
  </ul>
</li>



          <li>
            <a [routerLink]="['/tester/summary']" [queryParams]="{ productId: product.id, productName: product.name }">ğŸ“ˆ Summary</a>
          </li>

          <!-- Extra Adds (placeholder) -->
          <li>
            <a href="javascript:void(0)">âœ¨ Extra Adds</a>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <div *ngIf="currentProductName" class="current-product">
      ğŸ”§ Product: <strong>{{ currentProductName }}</strong>
    </div>

    <div *ngIf="!currentProductName" class="no-product-selected">
      <div class="icon">ğŸ“‹</div>
      <h3>Please Select a Product</h3>
    </div>

    <router-outlet></router-outlet>
  </div>
</div>
